(function(t){function e(e){for(var n,o,r=e[0],c=e[1],l=e[2],m=0,p=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);f&&f(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==s[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},s={app:0},a=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var f=c;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("08a0")},"07e6":function(t,e,i){t.exports=i.p+"img/info.svg"},"082b":function(t,e,i){t.exports=i.p+"img/button-close.svg"},"08a0":function(t,e,i){},"16ed":function(t,e,i){var n={"./Group 504.svg":"9ea3","./anal.svg":"cca8","./body.svg":"abf3","./dorsal.svg":"c0f9","./pectoral.svg":"3cc5","./pelvic.svg":"6ca5","./tail.svg":"f017"};function s(t){var e=a(t);return i(e)}function a(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=a,t.exports=s,s.id="16ed"},1771:function(t,e,i){var n={"./Material_baseColor.png":"c2a1","./attractor.mp4":"bc04","./bass.svg":"e38b","./boat.svg":"1a01","./bubbles.png":"bbf5","./button-close.svg":"082b","./button-swim.svg":"e12f","./button-tryagain.svg":"1e9e","./button_start.svg":"83b3","./drop.svg":"5301","./end.png":"94ec","./fail.svg":"79a5","./fins.txt":"70f3","./fins/Group 504.svg":"9ea3","./fins/anal.svg":"cca8","./fins/body.svg":"abf3","./fins/dorsal.svg":"c0f9","./fins/pectoral.svg":"3cc5","./fins/pelvic.svg":"6ca5","./fins/tail.svg":"f017","./fish_rigged.gltf":"6c43","./gifs/bass.gif":"ed6f","./gifs/gurnard.gif":"fbe6","./gifs/mackeral.gif":"4562","./gifs/plaice.gif":"1cb8","./guide.png":"2560","./gurnard.svg":"b85f","./home.svg":"86e6","./howto.gif":"de4d","./info-white.svg":"c0a8","./info.svg":"07e6","./loader.svg":"6e70","./logo.png":"cf05","./mackerel.svg":"28a6","./map-blue.jpg":"23e0","./map-default.jpg":"9030","./map-green.jpg":"9a23","./map-red.jpg":"3889","./map1.jpg":"a070","./plaice.svg":"b54c","./slave-screen.jpg":"c5a1","./slave.mp4":"376c","./sound/fail.wav":"c868","./sound/swim.wav":"3988","./sound/test.mp3":"4a46","./speech-white.svg":"6ccb","./speech.svg":"77f2","./test.svg":"c2db","./touchscreen_background.jpg":"7daa","./underwater.jpg":"3d42","./video/anal.mp4":"4bab","./video/bass.mp4":"8482","./video/body.mp4":"2d84","./video/dorsal.mp4":"230b","./video/gurnard.mp4":"ea31","./video/howto.mp4":"68a6","./video/mackeral.mp4":"82ba","./video/pectoral.mp4":"e4b2","./video/pelvic.mp4":"8ee7","./video/plaice.mp4":"6b05","./video/tail.mp4":"dc40"};function s(t){var e=a(t);return i(e)}function a(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=a,t.exports=s,s.id="1771"},"1a01":function(t,e,i){t.exports=i.p+"img/boat.svg"},"1cb8":function(t,e,i){t.exports=i.p+"img/plaice.gif"},"1e9e":function(t,e,i){t.exports=i.p+"img/button-tryagain.svg"},"230b":function(t,e,i){t.exports=i.p+"media/dorsal.mp4"},"23e0":function(t,e,i){t.exports=i.p+"img/map-blue.jpg"},2560:function(t,e,i){t.exports=i.p+"img/guide.png"},"28a6":function(t,e,i){t.exports=i.p+"img/mackerel.svg"},"2ae1":function(t,e,i){"use strict";i("db46")},"2d84":function(t,e,i){t.exports=i.p+"media/body.mp4"},"376c":function(t,e,i){t.exports=i.p+"media/slave.mp4"},3889:function(t,e,i){t.exports=i.p+"img/map-red.jpg"},3988:function(t,e,i){t.exports=i.p+"media/swim.wav"},"3cc5":function(t,e,i){t.exports=i.p+"img/pectoral.svg"},"3d42":function(t,e,i){t.exports=i.p+"img/underwater.jpg"},4562:function(t,e,i){t.exports=i.p+"img/mackeral.gif"},"492e":function(t,e,i){},"4a46":function(t,e,i){t.exports=i.p+"media/test.mp3"},"4bab":function(t,e,i){t.exports=i.p+"media/anal.mp4"},5301:function(t,e,i){t.exports=i.p+"img/drop.svg"},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"},on:{contextmenu:function(t){t.preventDefault()}}},[i("fishtank",{key:t.reset}),"creator"==t.$store.state.view?i("creator"):t._e(),"attractor"==t.$store.state.view?i("attractor"):t._e(),"final"==t.$store.state.view?i("final"):t._e()],1)},a=[],o=(i("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative"}},[n("div",{attrs:{id:"container"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!t.fishObject||!t.ready,expression:"!fishObject || !ready"}],staticClass:"loading",attrs:{src:i("6e70")}}),t.saving?n("img",{staticClass:"bubbles",attrs:{src:i("bbf5")}}):t._e(),t.fail?n("img",{staticClass:"fail",attrs:{src:i("79a5")}}):t._e(),t.playing?t._e():n("img",{staticClass:"close",attrs:{src:i("86e6")},on:{click:function(e){return t.$store.commit("SET_VIEW","attractor")}}}),t.playing?t._e():n("div",{staticClass:"howto button small aqua",on:{click:function(e){return t.$store.commit("SET_HOWTO",!0)}}},[t._v("Help")]),!t.playing&&t.draggingFin?t._l(Object.keys(t.fins),(function(t,e){return n("span",{key:e,staticClass:"finDrop",class:t,attrs:{"data-fintarget":t}})})):t._e(),n("transition",{attrs:{name:"fade"}},[!t.playing&&t.ready?n("footer",{staticClass:"footer"},[t._l(t.fins,(function(e,s,a){return n("div",{key:a,staticClass:"fin box",class:"fin-"+s,attrs:{"data-fin":s}},[n("div",{staticClass:"fin__select",class:t.backFin===s?"active":null,attrs:{id:s}},[n("img",{ref:s,refInFor:!0,staticStyle:{"pointer-events":"none"},attrs:{src:i("16ed")("./"+e.thumbnail)}})]),n("h3",{on:{click:function(e){return t.$store.commit("SET_FININFO",s)}}},[n("img",{attrs:{src:i("07e6")}}),t._v(t._s(s)+" fin ")])])})),n("div",{staticClass:"button green test",class:t.hidePlay?"inactive":null,on:{click:function(e){t.playing=!t.playing}}},[t._v("Test!")])],2):t._e(),t.playing?n("footer",{staticClass:"footer--playing"},[t.saving?t._e():n("div",{staticClass:"button orange",on:{click:function(e){t.playing=!1,t.hideAllFins()}}},[t._v("Choose different fins")]),t.score>2&&!t.saving?n("div",{staticClass:"button green",on:{click:t.save}},[t._v("Swim!")]):t._e()]):t._e()])],2),t.$store.state.finInfo?n("fininfo"):t._e(),t.$store.state.howto?n("howto"):t._e()],1)}),r=[],c=i("ade3"),l=i("1da1"),f=(i("96cf"),i("4fad"),i("ac1f"),i("1276"),i("b64b"),i("07ac"),i("d3b7"),i("b0c0"),i("a630"),i("3ca3"),i("5a89")),m=i("62d6"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"infowindow"},[n("div",{staticClass:"infowindow__content"},[n("img",{staticClass:"close",attrs:{src:i("082b")},on:{click:function(e){return t.$store.commit("SET_FININFO","")}}}),n("div",{staticClass:"infowindow__content__box"},[n("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"1em"}},[n("img",{staticStyle:{"margin-right":"0.5em","vertical-align":"middle",height:"30px",width:"30px"},attrs:{src:i("c0a8")}}),t._v(" Fin types ")]),n("div",{staticClass:"flex"},[n("div",{staticStyle:{width:"50%"}},[n("h1",{staticClass:"my-0",staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(t.$store.state.finInfo)+" "),n("span",{staticStyle:{opacity:"0.7","text-transform":"capitalize"}},[t._v("fin")])])]),n("div",{staticStyle:{width:"50%"}},[t.content[t.$store.state.finInfo]?n("p",{staticStyle:{"margin-top":"0"},domProps:{innerHTML:t._s(t.content[t.$store.state.finInfo]["content"])}}):t._e()])])]),t.$store.state.finInfo?n("video",{attrs:{autoplay:"",loop:"",muted:"",src:i("7bc1")("./"+t.$store.state.finInfo+".mp4")},domProps:{muted:!0}}):t._e()])])},u=[],d={props:["fin"],data:function(){return{content:{dorsal:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},anal:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},tail:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},body:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},pectoral:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},pelvic:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."}}}}},g=d,h=(i("b837"),i("2877")),b=Object(h["a"])(g,p,u,!1,null,"30dde881",null),v=b.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"infowindow"},[n("div",{staticClass:"infowindow__content"},[n("img",{staticClass:"close",attrs:{src:i("082b")},on:{click:function(e){return t.$store.commit("SET_HOWTO","")}}}),t._m(0),n("img",{attrs:{src:i("de4d")}})])])},x=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"infowindow__content__box"},[i("h1",[t._v("How to")]),i("h1",[t._v("Play")]),i("div",{staticStyle:{"margin-top":"50px"}},[i("p",{staticStyle:{"margin-top":"0"}},[t._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies.")])])])}],_={props:["fin"],data:function(){return{content:{dorsal:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},anal:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},tail:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},body:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},pectoral:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},pelvic:{content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."}}}}},w=_,O=(i("ac5b"),Object(h["a"])(w,y,x,!1,null,"6fa9a5b5",null)),j=O.exports,k=i("34ad"),E=i("c8b5"),F=i.n(E);window.Hammer=F.a;var S={name:"ThreeTest",components:{fininfo:v,howto:j},props:["resetCreator"],data:function(){return{draggingElement:null,colorSected:"",fishTexture:{image:new Image,finColor:""},sideFin:"",modifier:"",bendSize:.4,bend:new m["Bend"](.1,.7,0),saving:!1,fail:!1,finInfo:"",gui:!1,rotationDirection:{x:"",y:"",z:""},fishColor:"",draggingFin:"",playing:!1,camera:null,visible:!1,hidePlay:!1,clock:new f["h"],showFish:"fishObject",ready:!1,fishObject:"",scene:"",fishObjectUlr:i("6c43"),backgroundImage:i("7daa"),backFin:"",topFin:"",swimSpeed:3,sinking:!1,fins:{dorsal:{selected:"",thumbnail:"dorsal.svg",smimWind:4,roll:0,updown:4},anal:{selected:"",thumbnail:"anal.svg",smimWind:4,roll:0,updown:4},tail:{selected:"",thumbnail:"tail.svg",smimWind:4,roll:4,updown:4},body:{selected:"",thumbnail:"body.svg",smimWind:4,roll:4,updown:4},pectoral:{thumbnail:"pectoral.svg",selected:"",smimWind:2,roll:4,updown:3},pelvic:{selected:"",thumbnail:"pelvic.svg",smimWind:2,roll:0,updown:4}},movement:{smimWind:8,roll:8,updown:8}}},computed:{score:function(){var t=0;return Object.entries(this.fins).forEach((function(e){e[0]==e[1].selected&&t++})),t}},watch:{saving:function(t){t&&(this.fishObject.visible=!1)},"fishObject.rotation.x":function(t,e){this.rotationDirection.x=t>e?"+":"-"},"fishObject.rotation.y":function(t,e){this.rotationDirection.y=t>e?"+":"-"},"fishObject.rotation.z":function(t,e){this.rotationDirection.z=t>e?"+":"-"},playing:function(t){var e=this;t?this.score>2?(this.$store.state.sounds.test.loop=!0,this.$store.state.sounds.test.play()):(this.$store.state.sounds.fail.loop=!1,this.$store.state.sounds.fail.play(),setTimeout((function(){e.fail=!0}),1e3)):(this.defaultPosition(),setTimeout((function(){e.movement.roll=8,e.movement.updown=8,e.movement.smimWind=8}),500))},"fins.dorsal.selected":function(t){this.movement.roll="dorsal"==t?this.movement.roll-3.5:this.movement.roll+5},"fins.anal.selected":function(t){this.movement.roll="anal"==t?this.movement.roll-3.5:this.movement.roll+5},"fins.pectoral.selected":function(t){this.movement.roll="pectoral"==t?this.movement.roll-1:this.movement.roll+1},"fins.tail.selected":function(t){this.movement.smimWind="tail"==t?this.movement.smimWind-5:this.movement.smimWind+5},"fins.pelvic.selected":function(t){this.movement.updown="pelvic"==t?2:5},movement:{deep:!0,handler:function(t){t.updown>8&&(this.movement.updown=8)}}},methods:{dropFin:function(t,e){this.showFin(t),this.draggingFin=""},closePop:function(){this.finInfo=""},save:function(){var t=this;this.saving=!0,setTimeout(Object(l["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},0,Object.entries(t.fins).forEach((function(t){var e=t[0],n=t[1].selected;Object.assign(i,Object(c["a"])({},e,n))})),Object.assign(i,{color:t.colorSected}),Object.assign(i,{finColor:t.fishTexture.finColor}),Object.assign(i,{movement:t.movement}),Object.assign(i,{score:t.score}),e.next=9,t.$store.commit("ADD_FISH",i);case 9:return e.next=11,t.$store.commit("SET_VIEW","attractor");case 11:localStorage.setItem("previous",JSON.stringify(t.$store.state.fishes)),t.playing=!1,t.$store.commit("SET_VIEW","final");case 14:case"end":return e.stop()}}),e)}))),1500)},sink:function(){var t=this;this.hidePlay=!0,this.move("y",-60,5,!1),this.rotate("y",100,5,!1),this.rotate("z",100,2,!1),this.rotate("x",100,2,!1),setTimeout((function(){t.hidePlay=!1,t.defaultPosition(),t.playing=!1,t.sinking=!1}),5e3)},convertDecimal:function(t,e){var i=e?"0.00"+t:"0.0"+t,n=parseFloat(i),s=n+n;return s},killPosition:function(t,e){this.fishObject[t].val="axis"==t?this.startRotation[e]:this.startPosition[e]},defaultPosition:function(){this.fishObject.scale&&this.fishObject.scale.set(.03,.03,.03),this.fishObject.position&&this.fishObject.position.set(-.86,2.28,.03),this.fishObject.rotation&&this.fishObject.rotation.set(0,0,0)},showFin:function(t){var e=this;this.fins[t.split("-").pop()].selected=this.draggingFin,Object.keys(this.fins).forEach((function(i){var n=t+"_fin-"+i;console.log(n);var s=t+"_fin-"+e.draggingFin,a=t+"_fin-"+e.draggingFin+"_right";void 0!=e.fishObject.getObjectByName(n)&&n!==s?(e.fishObject.getObjectByName(n).visible=!1,"pectoral"!=t.split("-").pop()&&"pelvic"!=t.split("-").pop()||(e.fishObject.getObjectByName(n+"_right").visible=!1)):(e.fishObject.getObjectByName(s).visible=!0,e.sideFin=s,"pectoral"!=t.split("-").pop()&&"pelvic"!=t.split("-").pop()||void 0!=a&&(e.fishObject.getObjectByName(a).visible=!0))})),this.draggingFin=""},resetFins:function(){Object.values(this.fins).forEach((function(t){return t.selected=""}))},hideAllFins:function(){var t=this;this.resetFins(),Object.keys(this.fins).forEach((function(e){Object.keys(t.fins).forEach((function(i){var n="pos-"+e+"_fin-"+i,s="pos-"+e+"_fin-"+i+"_right";t.fishObject.getObjectByName(n)?(t.fishObject.getObjectByName(n).visible=!1,t.fishObject.getObjectByName(n).material.side=f["k"]):console.log("missing: "+n),"pectoral"!=e&&"pelvic"!=e||(t.fishObject.getObjectByName(s)?(t.fishObject.getObjectByName(s).visible=!1,t.fishObject.getObjectByName(n).material.side=f["k"]):console.log("missing: "+s))}))}))},animate:function(){var t=1;requestAnimationFrame(this.animate),this.playing?(this.modifier&&this.modifier.apply(),this.bend._force=-.5*Math.sin(3*this.clock.getElapsedTime())*.5,this.fishObject.getObjectByName("back-fins").rotation.y=.6*Math.sin(3*this.clock.getElapsedTime())*-.75,this.fishObject.getObjectByName(this.sideFin+"_right")&&(this.fishObject.getObjectByName(this.sideFin).rotation.y=.6*Math.sin(6*this.clock.getElapsedTime())*-.75,this.fishObject.getObjectByName(this.sideFin+"_right").rotation.y=.6*Math.sin(6*this.clock.getElapsedTime())*-.75),this.fishObject.position.y>-18.5&&(this.score<=2?this.fishObject.position.y-=.07:this.score>5?this.fishObject.position.y=1*Math.sin(this.clock.getElapsedTime()):this.fishObject.position.y=Math.sin(this.clock.getElapsedTime())*this.movement.updown/2,this.movement.smimWind<=7?this.fishObject.rotation.y=Math.sin(this.clock.getElapsedTime())*this.movement.smimWind/9:this.fishObject.rotation.y+=.009,this.movement.roll<=7?this.fishObject.rotation.x=this.fishObject.rotation.x=Math.sin(Date.now()*this.convertDecimal(1.5*t,!0))*Math.PI*this.movement.roll/10:this.fishObject.rotation.x+=.009)):(this.playing=!1,this.fail=!1,this.$store.state.sounds.test.pause(),this.$store.state.sounds.test.currentTime=0,this.$store.state.sounds.fail.pause(),this.$store.state.sounds.fail.currentTime=0),this.fishObject&&this.ready&&this.renderer.render(this.scene,this.camera)},modelLoader:function(t){var e=this,i=new k["a"];return new Promise((function(t,n){i.load(e.fishObjectUlr,(function(e){return t(e)}),null,n),f["f"].enabled=!0}))},init:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i,n,s,a,o,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=document.getElementById("container"),t.camera=new f["T"](10,1920/1080,10,300),t.camera.position.set(0,-1.21,239),t.scene=new f["bb"],t.scene.background=new f["i"](617138),n=new f["p"](16777147,526368,1),n.color.setHex(7385057),n.groundColor.setHex(823812),n.position.set(0,50,0),t.scene.add(n),s=new f["j"](16777215,1),s.color.setHex(16777215),s.position.set(-1,1.75,10),s.position.multiplyScalar(30),t.scene.add(s),a=new f["ib"],a.load(t.backgroundImage,(function(e){t.scene.background=e})),e.next=19,t.modelLoader();case 19:return o=e.sent,f["f"].enabled=!0,r=["#fcba03","#8ffdff","#c375ff","#73fdff"],c=r[Math.floor(Math.random()*r.length)],o.scene.getObjectByName("fish").material.color.setHex(parseInt(c.substr(1),16)),t.colorSected=c,t.fishObject=o.scene,t.fishObject.getObjectByName("fish").name="newFish",t.fishObject.castShadow=!1,t.fishObject.receiveShadow=!1,t.fishObject.rotation.set(1.6,0,0),t.scene.add(t.fishObject),t.defaultPosition(),t.hideAllFins(),t.modifier=new m["ModifierStack"](t.fishObject.getObjectByName("newFish")),t.modifier.addModifier(t.bend),t.renderer=new f["ob"]({antialias:!0,powerPreference:"high-performance"}),t.renderer.setSize(i.clientWidth,i.clientHeight),t.renderer.outputEncoding=f["pb"],i.appendChild(t.renderer.domElement),e.abrupt("return",!0);case 40:case"end":return e.stop()}}),e)})))()},preventDefault:function(t){t.preventDefault()},disableScroll:function(){document.body.addEventListener("touchmove",this.preventDefault,{passive:!1})}},beforeDestroy:function(){this.scene.remove.apply(this.scene,this.scene.children)},mounted:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f["f"].enabled=!0,e.next=3,t.init();case 3:t.ready=!0,t.animate(),t.disableScroll(),t.$nextTick((function(){var e=document.getElementsByClassName("fin");t.ready&&Array.from(e).forEach((function(i,n){E(e[n]).on("panstart",(function(e){console.log(e.target.id),void 0!=e.target.id&&(t.draggingFin=e.target.id)})),E(e[n]).on("pan",(function(e){t.draggingFin&&(t.draggingElement=t.$refs[t.draggingFin][0].style,t.draggingElement&&(t.draggingElement.zIndex="99999",t.draggingElement.position="fixed",t.draggingElement.width="172px",t.draggingElement.height="172px",t.draggingElement.left=e.center.x-100+"px",t.draggingElement.top=e.center.y-100+"px"))})),E(i).on("panend",(function(e){var i=document.elementsFromPoint(e.center.x,e.center.y)[0].classList[1];t.draggingElement&&(t.draggingElement.zIndex="10",t.draggingElement.position="absolute",t.draggingElement.left="-5%",t.draggingElement.top="-4%",t.draggingElement.width="110%",t.draggingElement.height=""),void 0!=i&&t.dropFin("pos-"+i),t.draggingElement=null,t.draggingFin=null}))}))}));case 7:case"end":return e.stop()}}),e)})))()}},C=S,M=(i("95d5"),Object(h["a"])(C,o,r,!1,null,"8ad54420",null)),N=M.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("video",{attrs:{muted:"",autoplay:"",src:i("bc04")},domProps:{muted:!0}}),n("div",{staticClass:"button green start",staticStyle:{width:"260px",height:"114px","line-height":"117px","font-size":"53px",padding:"0"},on:{click:function(e){return t.$store.commit("SET_VIEW","creator")}}},[t._v(" Start ")])])},$=[],B={},I=B,D=(i("2ae1"),Object(h["a"])(I,T,$,!1,null,null,null)),P=D.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative"}},[n("video",{attrs:{autoplay:"",muted:"",loop:"",src:i("376c")},domProps:{muted:!0}}),n("div",{attrs:{id:"containertank"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!t.playing&&t.$store.state.fishes.length,expression:"!playing && $store.state.fishes.length"}],staticClass:"loading",attrs:{src:i("6e70")}})])])},W=[];i("fb6a");function H(){var t=this,e=1,i=!0;requestAnimationFrame(this.animate),this.playing&&(this.camera.position.x>0?this.camera.position.x-=.05:this.camera.position.x=0,this.allFish.forEach((function(n,s){void 0!=n.userData&&(t.modifier&&t.modifier.apply(),t.bend._force=-.5*Math.sin(3*t.clock.getElapsedTime())*.5,n.getObjectByName("back-fins").rotation.y=.6*Math.sin(3*t.clock.getElapsedTime())*-.75,n.score>5?n.position.y=1*Math.sin(t.clock.getElapsedTime()):n.position.y=Math.sin(t.clock.getElapsedTime())*n.userData.movement.updown/2,n.userData.movement.smimWind<=7?n.rotation.y=Math.sin(t.clock.getElapsedTime())*n.userData.movement.smimWind/9:n.rotation.y+=.009,n.userData.movement.roll<=7?n.rotation.x=n.rotation.x=Math.sin(Date.now()*t.convertDecimal(1.5*e,!0))*Math.PI*n.userData.movement.roll/10:n.rotation.x+=.009,t.camera.position.x>400&&0==s&&(n.position.x=300),t.camera.position.x>0&&i&&0==s&&0==s&&(n.position.x-=.05))}))),this.mommyFish&&this.renderer.render(this.scene,this.camera)}var R=H,z={name:"ThreeTest",data:function(){return{copyMaterial:null,colors:["red","green","blue","default"],images:[],fishCounter:0,mommyFish:null,modifier:[],bendSize:.4,bend:new m["Bend"](.1,.7,0),allFish:[],allTextures:[],gui:!1,fishScale:.3,playing:!1,startRotation:{x:0,y:0,z:0},startPosition:{x:0,y:0,z:0},position:{x:0,y:0,z:0},camera:null,background:null,visible:!1,hidePlay:!1,clock:new f["h"],showFish:"fishObject",ready:!1,fishObject:"",scene:"",fishObjectUlr:i("6c43"),backgroundImage:i("3d42"),backFin:"",sideFin:"",topFin:"",swimSpeed:3,sinking:!1,fins:{dorsal:{thumbnail:"dorsal.svg"},anal:{thumbnail:"anal.svg"},tail:{thumbnail:"tail.svg"},body:{thumbnail:"body.svg"},pectoral:{thumbnail:"pectoral.svg"},pelvic:{thumbnail:"pelvic.svg"}}}},computed:{score:function(){var t=0;return Object.entries(this.fins).forEach((function(e){e[0]==e[1].selected&&t++})),t}},watch:{fishScale:function(t){this.fishObject.scale.set(t,t,t)}},methods:{convertDecimal:function(t,e){var i=e?"0.00"+t:"0.0"+t,n=parseFloat(i),s=n+n;return s},showFin:function(t){var e=this;Object.keys(this.fins).forEach((function(i){var n=t+"_fin-"+i,s=t+"_fin-"+e.draggingFin;e.fishObject.getObjectByName(n)&&n!==s?e.fishObject.getObjectByName(n).visible=!1:e.fishObject.getObjectByName(s).visible=!0}))},hideShowAllFins:function(t,e){var i=this;Object.keys(this.fins).forEach((function(e){Object.keys(i.fins).forEach((function(n){var s="pos-"+e+"_fin-"+n;i.allFish[t].getObjectByName(s)&&(i.allFish[t].getObjectByName(s).visible=!1,i.allFish[t].getObjectByName(s).material.side=f["k"]),i.allFish[t].getObjectByName(s+"_right")&&(i.allFish[t].getObjectByName(s+"_right").visible=!1,i.allFish[t].getObjectByName(s+"_right").material.side=f["k"])}))})),Object.entries(e).forEach((function(e){var n="pos-"+e[0]+"_fin-"+e[1];i.allFish[t].getObjectByName(n)&&(i.allFish[t].getObjectByName(n).visible=!0),i.allFish[t].getObjectByName(n+"_right")&&(i.allFish[t].getObjectByName(n+"_right").visible=!0)}))},animate:R,modelLoader:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new k["a"],t.abrupt("return",new Promise((function(t,n){i.load(e.fishObjectUlr,(function(e){return t(e)}),null,n),f["f"].enabled=!0})));case 2:case"end":return t.stop()}}),t)})))()},init:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i,n,s,a,o,r,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=document.getElementById("containertank"),t.camera=new f["T"](10,1920/1080,10,800),t.camera.position.set(400,0,410),t.scene=new f["bb"],t.scene.background=null,n=new f["p"](3594239,637440,1),n.groundColor.setHex(4110848),n.color.setHex(62940),t.scene.add(n),s=new f["j"](16777215,1),s.color.setHex(16777215),s.position.set(-1,1.75,10),s.position.multiplyScalar(30),t.scene.add(s),a=1,o=800,r="#2a8f99",t.scene.fog=new f["m"](r,a,o),e.next=20,t.modelLoader();case 20:return c=e.sent,t.mommyFish=c.scene,t.$store.state.fishes.length&&(t.$store.state.fishes.slice().reverse().forEach((function(e,i){var n=t.mommyFish.getObjectByName("fish").material.clone();n.color.setHex(parseInt(e.color.substr(1),16));var s=t.mommyFish.clone();console.log("color:"+e.color),s.getObjectByName("fish").material=n,Object.assign(s.userData,{movement:e.movement}),Object.assign(s.userData,{updown:e.updown}),Object.assign(s.userData,{score:e.score}),Object.assign(s.userData,{color:e.color}),0!=i?(s.scale.set(.02,.02,.02),s.position.x=400*Math.random()+0,s.position.y=100*Math.random()-50,s.position.z=280*Math.random()-200):(s.scale.set(.03,.03,.03),s.position.z=150,s.position.x=400),t.allFish.push(s),t.scene.add(s),t.hideShowAllFins(i,e)})),t.allFish[0].name="mainFish",l=t.scene.getObjectByName("mainFish").children[3],t.modifier=new m["ModifierStack"](l),t.modifier.addModifier(t.bend),console.log("count:"+t.allFish.length)),i&&(t.renderer=new f["ob"]({antialias:!0,alpha:!0,powerPreference:"high-performance"}),t.renderer.setSize(i.clientWidth,i.clientHeight),t.renderer.outputEncoding=f["pb"],t.renderer.setClearColor(0,0),i.appendChild(t.renderer.domElement)),e.abrupt("return",!0);case 25:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:t.playing=!0,t.ready=!0,t.animate();case 5:case"end":return e.stop()}}),e)})))()}},A=z,U=(i("ae38"),Object(h["a"])(A,L,W,!1,null,"3ee074bf",null)),V=U.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"endscreen"},[n("div",{staticClass:"endscreen_back"}),n("div",{staticClass:"sea"}),n("div",{staticClass:"button green reset shadowed",on:{click:function(e){return t.$store.commit("SET_VIEW","attractor")}}},[t._v("Start again")]),n("img",{staticClass:"boat",attrs:{src:i("1a01")}}),n("span",{staticClass:"boatQuote"},[n("img",{staticClass:"triangle",attrs:{src:i("6ccb")}}),n("p",{staticStyle:{color:"#4BB9B2","margin-bottom":"1em"}},[t._v("Iâ€™m a Marine Biologist.")]),n("p",[t._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies.")])]),t._l(t.species,(function(e,s){return[n("div",{key:s,staticClass:"fish",style:{top:e.top+"px",left:e.left+"px"}},[n("span",{staticClass:"infoBox",on:{click:function(e){return t.getFish(s)}}},[n("img",{staticClass:"triangle",attrs:{src:i("77f2")}}),n("img",{attrs:{width:"40",height:"40",src:i("c0a8")}}),t._v(t._s(e.name))]),n("img",{staticClass:"fish_image",attrs:{src:i("1771")("./"+e.img)}})])]})),t.popup?n("div",{staticClass:"infowindow"},[n("div",{staticClass:"infowindow__content"},[n("img",{staticClass:"close",attrs:{src:i("082b")},on:{click:function(e){t.popup=!1}}}),n("div",{staticClass:"infowindow__content__box"},[n("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"1em"}},[n("img",{staticStyle:{"margin-right":"0.5em","vertical-align":"middle",height:"30px",width:"30px"},attrs:{src:i("c0a8")}}),t._v(" Local fish ")]),n("div",{staticClass:"flex"},[n("div",{staticStyle:{width:"50%"}},[n("h1",{staticClass:"my-0",staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(t.species[t.selected].name))])]),n("div",{staticStyle:{width:"50%"}},[n("p",{staticStyle:{"margin-top":"0"},domProps:{innerHTML:t._s(t.species[t.selected].content)}})])])]),n("img",{staticStyle:{"z-index":"1",position:"relative"},attrs:{src:i("8b42")("./"+t.species[t.selected].vid)}})])]):t._e()],2)},J=[],q={methods:{getFish:function(t){this.popup=!0,this.selected=t}},data:function(){return{selected:0,popup:!1,species:[{name:"Atlantic Mackerel",img:"mackerel.svg",vid:"mackeral.gif",top:587,left:101,content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},{name:"Sea Bass",img:"bass.svg",vid:"bass.gif",top:772,left:545,content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},{name:"Red Gurnard",img:"gurnard.svg",vid:"gurnard.gif",top:568,left:920,content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."},{name:"European Plaice",img:"plaice.svg",vid:"plaice.gif",top:688,left:1395,content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas efficitur magna at odio maximus ultricies."}]}}},Q=q,K=(i("fcee"),Object(h["a"])(Q,G,J,!1,null,"ae13ec56",null)),X=K.exports,Y={name:"App",data:function(){return{test:!0,reset:0,tankRefresh:0,ready:!1,startCreator:!1}},components:{final:X,fishtank:V,attractor:P,creator:N},watch:{"$store.state.fishes":function(t){this.tankRefresh++,this.tankRefresh>0&&this.reset++},"$store.state.reset":function(t){this.tankRefresh++}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("previous"));e&&e.forEach((function(e,i){t.$store.commit("ADD_FISH",e)}))}},Z=Y,tt=(i("034f"),Object(h["a"])(Z,s,a,!1,null,null,null)),et=tt.exports,it=i("2f62"),nt=i("2247"),st=i.n(nt);n["a"].config.productionTip=!1,n["a"].use(it["a"]),n["a"].use(st.a);var at=new it["a"].Store({state:{view:"attractor",finInfo:"",fishes:[],howto:!1,reset:0,sounds:{swim:new Audio(i("3988")),test:new Audio(i("4a46")),fail:new Audio(i("c868"))}},mutations:{RESET_SCREEN:function(t){t.reset++},ADD_FISH:function(t,e){t.fishes.length=Math.min(t.fishes.length,3),t.fishes.push(e)},SET_VIEW:function(t,e){t.view=e},SET_FININFO:function(t,e){t.finInfo=e},SET_HOWTO:function(t,e){t.howto=e}}}),ot={created:function(){console.log("mixin hook called")},methods:{playSound:function(){alert("playing sound")}}};new n["a"]({store:at,mixins:[ot],render:function(t){return t(et)}}).$mount("#app")},"5e48":function(t,e,i){},"68a6":function(t,e,i){t.exports=i.p+"media/howto.mp4"},"6b05":function(t,e,i){t.exports=i.p+"media/plaice.mp4"},"6c43":function(t,e,i){t.exports=i.p+"fa4abddc09cd33204151a9d493d1ebc7.gltf"},"6ca5":function(t,e,i){t.exports=i.p+"img/pelvic.svg"},"6ccb":function(t,e,i){t.exports=i.p+"img/speech-white.svg"},"6e70":function(t,e,i){t.exports=i.p+"img/loader.svg"},"70f3":function(t,e){pos,dorsal_fin,dorsal,pos,dorsal_fin,anal,pos,dorsal_fin,tail,pos,dorsal_fin,body,pos,dorsal_fin,pectoral,pos,dorsal_fin,pelvic,pos,anal_fin,dorsal,pos,anal_fin,anal,pos,anal_fin,tail,pos,anal_fin,body,pos,anal_fin,pectoral,pos,anal_fin,pelvic,pos,tail_fin,dorsal,pos,tail_fin,anal,pos,tail_fin,tail,pos,tail_fin,body,pos,tail_fin,pectoral,pos,tail_fin,pelvic,pos,body_fin,dorsal,pos,body_fin,anal,pos,body_fin,tail,pos,body_fin,body,pos,body_fin,pectoral,pos,body_fin,pelvic,pos,pectoral_fin,dorsal,pos,pectoral_fin,anal,pos,pectoral_fin,tail,pos,pectoral_fin,body,pos,pectoral_fin,pectoral,pos,pectoral_fin,pelvic,pos,pelvic_fin,dorsal,pos,pelvic_fin,anal,pos,pelvic_fin,tail,pos,pelvic_fin,body,pos,pelvic_fin,pectoral,pos,pelvic_fin,pelvic},"77f2":function(t,e,i){t.exports=i.p+"img/speech.svg"},"79a5":function(t,e,i){t.exports=i.p+"img/fail.svg"},"7bc1":function(t,e,i){var n={"./anal.mp4":"4bab","./bass.mp4":"8482","./body.mp4":"2d84","./dorsal.mp4":"230b","./gurnard.mp4":"ea31","./howto.mp4":"68a6","./mackeral.mp4":"82ba","./pectoral.mp4":"e4b2","./pelvic.mp4":"8ee7","./plaice.mp4":"6b05","./tail.mp4":"dc40"};function s(t){var e=a(t);return i(e)}function a(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=a,t.exports=s,s.id="7bc1"},"7daa":function(t,e,i){t.exports=i.p+"img/touchscreen_background.jpg"},"82ba":function(t,e,i){t.exports=i.p+"media/mackeral.mp4"},"83b3":function(t,e,i){t.exports=i.p+"img/button_start.svg"},8482:function(t,e,i){t.exports=i.p+"media/bass.mp4"},"86e6":function(t,e,i){t.exports=i.p+"img/home.svg"},8717:function(t,e,i){},"8b42":function(t,e,i){var n={"./bass.gif":"ed6f","./gurnard.gif":"fbe6","./mackeral.gif":"4562","./plaice.gif":"1cb8"};function s(t){var e=a(t);return i(e)}function a(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=a,t.exports=s,s.id="8b42"},"8ee7":function(t,e,i){t.exports=i.p+"media/pelvic.mp4"},9030:function(t,e,i){t.exports=i.p+"img/map-default.jpg"},"94ec":function(t,e,i){t.exports=i.p+"img/end.png"},"95d5":function(t,e,i){"use strict";i("8717")},"9a23":function(t,e,i){t.exports=i.p+"img/map-green.jpg"},"9ea3":function(t,e,i){t.exports=i.p+"img/Group 504.svg"},a070:function(t,e,i){t.exports=i.p+"img/map1.jpg"},abf3:function(t,e,i){t.exports=i.p+"img/body.svg"},ac5b:function(t,e,i){"use strict";i("492e")},ae38:function(t,e,i){"use strict";i("f88a")},b54c:function(t,e,i){t.exports=i.p+"img/plaice.svg"},b837:function(t,e,i){"use strict";i("f295")},b85f:function(t,e,i){t.exports=i.p+"img/gurnard.svg"},bbf5:function(t,e,i){t.exports=i.p+"img/bubbles.png"},bc04:function(t,e,i){t.exports=i.p+"media/attractor.mp4"},c0a8:function(t,e,i){t.exports=i.p+"img/info-white.svg"},c0f9:function(t,e,i){t.exports=i.p+"img/dorsal.svg"},c2a1:function(t,e,i){t.exports=i.p+"img/Material_baseColor.png"},c2db:function(t,e,i){t.exports=i.p+"img/test.svg"},c5a1:function(t,e,i){t.exports=i.p+"img/slave-screen.jpg"},c868:function(t,e,i){t.exports=i.p+"media/fail.wav"},cca8:function(t,e,i){t.exports=i.p+"img/anal.svg"},cf05:function(t,e,i){t.exports=i.p+"img/logo.png"},db46:function(t,e,i){},dc40:function(t,e,i){t.exports=i.p+"media/tail.mp4"},de4d:function(t,e,i){t.exports=i.p+"img/howto.gif"},e12f:function(t,e,i){t.exports=i.p+"img/button-swim.svg"},e38b:function(t,e,i){t.exports=i.p+"img/bass.svg"},e4b2:function(t,e,i){t.exports=i.p+"media/pectoral.mp4"},ea31:function(t,e,i){t.exports=i.p+"media/gurnard.mp4"},ed6f:function(t,e,i){t.exports=i.p+"img/bass.gif"},f017:function(t,e,i){t.exports=i.p+"img/tail.svg"},f295:function(t,e,i){},f88a:function(t,e,i){},fbe6:function(t,e,i){t.exports=i.p+"img/gurnard.gif"},fcee:function(t,e,i){"use strict";i("5e48")}});
//# sourceMappingURL=app.js.map